import"./chunk-3RK6DDJD.js";import{a as N,b as T,h as A,i as j,m as q,n as B}from"./chunk-WLFKFW6S.js";import{b as C,d as x}from"./chunk-LC7HZC43.js";import"./chunk-YXOZBBHG.js";import{A as k,b as M,d as c,f as P,g as y,l as E,o as I,r as S,y as R}from"./chunk-CCREW7CN.js";import{b as D}from"./chunk-WSZ2ZTRK.js";import{Y as O,Z as F}from"./chunk-WXJKX6WL.js";import{$b as f,Nb as m,Ob as t,Pb as r,Qb as d,Zb as h,_a as s,db as l,gd as v,kb as g,nc as i,oc as u,pb as p,pc as w,rd as b,yd as _}from"./chunk-PCHMKQLW.js";function H(o,a){o&1&&(t(0,"mat-error"),i(1," Password is required "),r())}function L(o,a){o&1&&(t(0,"mat-error"),i(1," Minimum 6 characters "),r())}function z(o,a){o&1&&(t(0,"mat-error"),i(1," Confirmation is required "),r())}function U(o,a){o&1&&(t(0,"mat-error"),i(1," Passwords do not match "),r())}function J(o,a){if(o&1&&(t(0,"p",16),i(1),r()),o&2){let n=f();s(),u(n.apiError)}}function K(o,a){if(o&1&&(t(0,"p",17),i(1),r()),o&2){let n=f();s(),u(n.infoMessage)}}var V=class o{constructor(a,n,e,G,Q){this.fb=a;this.route=n;this.http=e;this.router=G;this.service=Q;this.form=this.fb.group({password:["",[c.required,c.minLength(6)]],confirmPassword:["",c.required]},{validators:this.passwordsMatch})}form;apiError="";infoMessage="";loading=!1;token="";ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token")||"",this.token||(this.apiError="Invalid or missing token.")}passwordsMatch(a){let n=a.get("password")?.value,e=a.get("confirmPassword")?.value;return n&&e&&n!==e?{mismatch:!0}:null}submit(){if(this.form.invalid||!this.token)return;this.apiError="",this.infoMessage="",this.loading=!0;let{password:a}=this.form.value;this.service.resetPassword(this.token,a).subscribe({next:()=>{this.loading=!1,this.infoMessage="Password successfully reset. Redirecting...",setTimeout(()=>this.router.navigate(["/auth/sign-in"]),2e3)},error:n=>{this.loading=!1,this.apiError=n.error?.message||"Reset failed. Please try again."}})}static \u0275fac=function(n){return new(n||o)(l(R),l(C),l(_),l(x),l(D))};static \u0275cmp=g({type:o,selectors:[["app-reset-password"]],decls:33,vars:9,consts:[[1,"auth-shell"],[1,"auth-frame"],[1,"form-pane","only-form"],[1,"brand"],["src","https://ik.imagekit.io/a2wpi1kd9/imgToUrl/image-to-url_HEow9eLbR","alt","Medtik",1,"brand-mark"],[1,"sub"],[3,"ngSubmit","formGroup"],["appearance","outline"],["matInput","","type","password","formControlName","password","placeholder","********"],[4,"ngIf"],["matInput","","type","password","formControlName","confirmPassword","placeholder","********"],["class","api-error","role","alert",4,"ngIf"],["class","info",4,"ngIf"],["mat-flat-button","","color","primary","type","submit",1,"submit",3,"disabled"],[1,"aux"],["routerLink","/auth/sign-in"],["role","alert",1,"api-error"],[1,"info"]],template:function(n,e){n&1&&(t(0,"p"),i(1,"reset-password-component works!"),r(),t(2,"div",0)(3,"div",1)(4,"main",2)(5,"div",3),d(6,"img",4),t(7,"h1"),i(8,"Reset Password"),r()(),t(9,"h2"),i(10,"Set a new password"),r(),t(11,"p",5),i(12,"Enter your new password below to complete the reset process."),r(),t(13,"form",6),h("ngSubmit",function(){return e.submit()}),t(14,"mat-form-field",7)(15,"mat-label"),i(16,"New password"),r(),d(17,"input",8),p(18,H,2,0,"mat-error",9)(19,L,2,0,"mat-error",9),r(),t(20,"mat-form-field",7)(21,"mat-label"),i(22,"Confirm password"),r(),d(23,"input",10),p(24,z,2,0,"mat-error",9)(25,U,2,0,"mat-error",9),r(),p(26,J,2,1,"p",11)(27,K,2,1,"p",12),t(28,"button",13),i(29),r(),t(30,"div",14)(31,"a",15),i(32,"Back to sign in"),r()()()()()()),n&2&&(s(13),m("formGroup",e.form),s(5),m("ngIf",e.form.controls.password.touched&&(e.form.controls.password.errors==null?null:e.form.controls.password.errors.required)),s(),m("ngIf",e.form.controls.password.errors==null?null:e.form.controls.password.errors.minlength),s(5),m("ngIf",e.form.controls.confirmPassword.touched&&(e.form.controls.confirmPassword.errors==null?null:e.form.controls.confirmPassword.errors.required)),s(),m("ngIf",e.form.errors==null?null:e.form.errors.mismatch),s(),m("ngIf",e.apiError),s(),m("ngIf",e.infoMessage),s(),m("disabled",e.loading),s(),w(" ",e.loading?"Resetting...":"Reset Password"," "))},dependencies:[b,v,k,E,M,P,y,I,S,j,A,N,T,B,q,F,O],styles:[".auth-shell[_ngcontent-%COMP%]{min-height:100svh;display:flex;align-items:center;justify-content:center;padding:clamp(16px,4vmin,32px);overflow:auto}.auth-frame[_ngcontent-%COMP%]{width:min(520px,94vw);display:grid;grid-template-columns:1fr;border-radius:24px;background:linear-gradient(180deg,#ffffff08,#ffffff05),#101828b8;-webkit-backdrop-filter:blur(10px) saturate(120%);backdrop-filter:blur(10px) saturate(120%);border:1px solid rgba(255,255,255,.08);box-shadow:0 24px 70px #00000080}.form-pane[_ngcontent-%COMP%]{padding:28px 20px;display:grid;align-content:start}.brand[_ngcontent-%COMP%]{display:grid;place-items:center;gap:.35rem;margin-bottom:.75rem;text-align:center}.brand-mark[_ngcontent-%COMP%]{width:96px;height:96px;object-fit:contain;filter:drop-shadow(0 10px 24px rgba(42,118,183,.6))}h2[_ngcontent-%COMP%]{margin:.25rem 0 .5rem;font-weight:800;color:#e6eef6;font-size:clamp(1.2rem,2vw,1.5rem)}.sub[_ngcontent-%COMP%]{margin:.1rem 0 1rem;color:#a7b4c5}form[_ngcontent-%COMP%]{display:grid;gap:.8rem}.submit[_ngcontent-%COMP%]{width:100%;border-radius:12px;margin-top:.25rem}.aux[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:.1rem}.aux[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a7b4c5;text-decoration:none}.aux[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#e6eaf2}.api-error[_ngcontent-%COMP%]{color:#f44336;font-size:.85rem;margin:-.25rem 0 .5rem}.info[_ngcontent-%COMP%]{color:#a7b4c5;font-size:.85rem;margin:-.25rem 0 .5rem}"]})};export{V as ResetPasswordComponent};
