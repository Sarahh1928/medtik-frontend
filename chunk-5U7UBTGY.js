import{a as ve,b as he}from"./chunk-VDGTLRZA.js";import{a as de}from"./chunk-NZMSRNPH.js";import{a as se,b as pe}from"./chunk-TQOOYVQA.js";import"./chunk-MS4AQ6UA.js";import{a as ue,b as ge,d as fe}from"./chunk-S4N5XNDO.js";import"./chunk-EQK2A33D.js";import"./chunk-CBB6Q34Z.js";import"./chunk-3RK6DDJD.js";import{a as ie,c as ne,h as re,i as oe,m as ce,n as me}from"./chunk-FXUZVO2G.js";import{b as _e}from"./chunk-64ENB45T.js";import"./chunk-ZF73G4FL.js";import"./chunk-CHFE4G6B.js";import"./chunk-J42FRN67.js";import"./chunk-XDTU2MFJ.js";import{a as ae,b as le}from"./chunk-CQ63BDYT.js";import{B as X,b as j,d as N,f as B,g as H,m as Y,o as q,p as J,q as K,r as Q,w as W,z as Z}from"./chunk-NZBL2PSU.js";import{Y as ee,Z as te}from"./chunk-YNMGB45N.js";import"./chunk-F426BNRH.js";import{Bb as S,Db as y,Fb as d,Gc as z,Hc as $,Ia as D,L as F,Ma as a,Pb as G,Rb as U,Sc as L,Tb as r,Ub as g,V,Vb as E,Xa as k,ab as p,ea as w,hc as R,ja as x,ka as b,rb as c,sb as n,tb as i,ub as f,yb as A,zb as T}from"./chunk-BE7DJT6W.js";function Se(o,e){if(o&1&&(n(0,"div",60)(1,"mat-icon"),r(2,"error"),i(),n(3,"span"),r(4),i()()),o&2){let t=d(2);a(4),g(t.apiError)}}function we(o,e){if(o&1&&(n(0,"mat-option",21),r(1),i()),o&2){let t=e.$implicit;c("value",t),a(),E(" ",t.name," ")}}function Oe(o,e){if(o&1&&(n(0,"mat-option",21),r(1),i()),o&2){let t=e.$implicit;c("value",t),a(),E(" ",t," ")}}function Me(o,e){if(o&1){let t=S();n(0,"span",61),r(1),n(2,"button",62),y("click",function(){let l=x(t).index,s=d(2);return b(s.removeChip("languages",l))}),r(3,"\xD7"),i()()}if(o&2){let t=e.$implicit;a(),E(" ",t.value," ")}}function De(o,e){if(o&1){let t=S();n(0,"span",61),r(1),n(2,"button",62),y("click",function(){let l=x(t).index,s=d(2);return b(s.removeChip("hospitals",l))}),r(3,"\xD7"),i()()}if(o&2){let t=e.$implicit;a(),E(" ",t.value," ")}}function Ne(o,e){if(o&1){let t=S();n(0,"span",61),r(1),n(2,"button",62),y("click",function(){let l=x(t).index,s=d(2);return b(s.removeChip("education",l))}),r(3,"\xD7"),i()()}if(o&2){let t=e.$implicit;a(),E(" ",t.value," ")}}function Ie(o,e){if(o&1){let t=S();n(0,"span",61),r(1),n(2,"button",62),y("click",function(){let l=x(t).index,s=d(2);return b(s.removeChip("certificates",l))}),r(3,"\xD7"),i()()}if(o&2){let t=e.$implicit;a(),E(" ",t.value," ")}}function Fe(o,e){if(o&1&&(n(0,"mat-option",21),r(1),i()),o&2){let t=e.$implicit;c("value",t),a(),g(t)}}function Ve(o,e){if(o&1&&(n(0,"div",63)(1,"h4"),r(2),i(),n(3,"div",64)(4,"mat-form-field",18)(5,"mat-label"),r(6,"USD"),i(),f(7,"input",65),i(),n(8,"mat-form-field",18)(9,"mat-label"),r(10,"SAR"),i(),f(11,"input",66),i(),n(12,"mat-form-field",18)(13,"mat-label"),r(14,"EGP"),i(),f(15,"input",67),i(),n(16,"mat-form-field",18)(17,"mat-label"),r(18,"AED"),i(),f(19,"input",68),i()()()),o&2){let t,m=e.$implicit,l=e.index;c("formGroupName",l),a(2),g((t=m.get("service"))==null?null:t.value)}}function ke(o,e){if(o&1&&(n(0,"div",51)(1,"mat-icon"),r(2,"schedule"),i(),n(3,"span"),r(4),i()()),o&2){let t=d(2);a(4),E("",t.preview().yearsOfExperience," years experience")}}function Ae(o,e){if(o&1&&(n(0,"div",51)(1,"mat-icon"),r(2,"call"),i(),n(3,"span"),r(4),i()()),o&2){let t=d(2);a(4),g(t.preview().phone)}}function Te(o,e){o&1&&(n(0,"mat-icon"),r(1,"chat"),i())}function Ge(o,e){o&1&&(n(0,"mat-icon"),r(1,"call"),i())}function Ue(o,e){o&1&&(n(0,"mat-icon"),r(1,"videocam"),i())}function Re(o,e){if(o&1&&(n(0,"div",71),p(1,Te,2,0,"mat-icon",72)(2,Ge,2,0,"mat-icon",72)(3,Ue,2,0,"mat-icon",72),n(4,"span"),r(5),i(),n(6,"strong"),r(7),i()()),o&2){let t=e.$implicit,m=d(3);a(),c("ngIf",t.service==="CHAT"),a(),c("ngIf",t.service==="VOICE"),a(),c("ngIf",t.service==="VIDEO"),a(2),g(t.service),a(2),g(m.priceLabel(t))}}function ze(o,e){if(o&1&&(n(0,"section",56)(1,"h4")(2,"mat-icon"),r(3,"payments"),i(),r(4," Pricing"),i(),n(5,"div",69),p(6,Re,8,5,"div",70),i()()),o&2){let t=d(2);a(6),c("ngForOf",t.preview().pricing)}}function $e(o,e){if(o&1&&(n(0,"span",61),r(1),i()),o&2){let t=e.$implicit;a(),g(t)}}function Le(o,e){o&1&&(n(0,"span",8),r(1,"Add languages you speak."),i())}function je(o,e){if(o&1&&(n(0,"li"),r(1),i()),o&2){let t=e.$implicit;a(),g(t)}}function Be(o,e){o&1&&(n(0,"li",8),r(1,"Add where you practice."),i())}function He(o,e){if(o&1&&(n(0,"li"),r(1),i()),o&2){let t=e.$implicit;a(),g(t)}}function Ye(o,e){o&1&&(n(0,"li",8),r(1,"List your education."),i())}function qe(o,e){if(o&1&&(n(0,"li"),r(1),i()),o&2){let t=e.$implicit;a(),g(t)}}function Je(o,e){o&1&&(n(0,"li",8),r(1,"Add your certifications."),i())}function Ke(o,e){if(o&1){let t=S();A(0),p(1,Se,5,1,"div",3),n(2,"section",4)(3,"header",5)(4,"div",6),f(5,"img",7),n(6,"div")(7,"h2"),r(8,"Doctor profile"),i(),n(9,"p",8),r(10,"Complete your profile to unlock the workspace."),i()()(),n(11,"div",9)(12,"button",10),y("click",function(){x(t);let l=d();return b(l.reset())}),n(13,"mat-icon"),r(14,"refresh"),i(),r(15," Reset "),i(),n(16,"button",11),y("click",function(){x(t);let l=d();return b(l.save())}),n(17,"mat-icon"),r(18),i(),n(19,"span",12),r(20),i()()()(),n(21,"div",13)(22,"h3",14)(23,"mat-icon"),r(24,"badge"),i(),r(25," Identity"),i(),n(26,"div",15)(27,"mat-form-field",16)(28,"mat-label"),r(29,"Display name"),i(),f(30,"input",17),i(),n(31,"mat-form-field",18)(32,"mat-label"),r(33,"Professional title"),i(),f(34,"input",19),i(),n(35,"mat-form-field",18)(36,"mat-label"),r(37,"Department"),i(),n(38,"mat-select",20)(39,"mat-option",21),r(40,"Select department"),i(),p(41,we,2,2,"mat-option",22),i()(),n(42,"mat-form-field",18)(43,"mat-label"),r(44,"Years of experience"),i(),f(45,"input",23),i(),n(46,"mat-form-field",18)(47,"mat-label"),r(48,"Timezone"),i(),n(49,"mat-select",24),p(50,Oe,2,2,"mat-option",22),i()(),n(51,"mat-form-field",16)(52,"mat-label"),r(53,"License / registration number"),i(),f(54,"input",25),i(),n(55,"mat-form-field",16)(56,"mat-label"),r(57,"Avatar URL"),i(),f(58,"input",26),n(59,"mat-hint"),r(60,"Paste an image link you want to display."),i()(),n(61,"mat-form-field",16)(62,"mat-label"),r(63,"Phone number"),i(),f(64,"input",27),i(),n(65,"mat-form-field",16)(66,"mat-label"),r(67,"Bio"),i(),f(68,"textarea",28),i()()(),n(69,"div",13)(70,"h3",14)(71,"mat-icon"),r(72,"workspace_premium"),i(),r(73," Professional details"),i(),n(74,"div",29)(75,"label"),r(76,"Languages"),i(),n(77,"div",30),p(78,Me,4,1,"span",31),n(79,"input",32),y("keydown.enter",function(l){x(t);let s=d();return b(s.onChipEnter("languages",l))}),i()()(),n(80,"div",29)(81,"label"),r(82,"Hospitals / clinics"),i(),n(83,"div",30),p(84,De,4,1,"span",31),n(85,"input",32),y("keydown.enter",function(l){x(t);let s=d();return b(s.onChipEnter("hospitals",l))}),i()()(),n(86,"div",29)(87,"label"),r(88,"Education"),i(),n(89,"div",30),p(90,Ne,4,1,"span",31),n(91,"input",32),y("keydown.enter",function(l){x(t);let s=d();return b(s.onChipEnter("education",l))}),i()()(),n(92,"div",29)(93,"label"),r(94,"Certificates"),i(),n(95,"div",30),p(96,Ie,4,1,"span",31),n(97,"input",32),y("keydown.enter",function(l){x(t);let s=d();return b(s.onChipEnter("certificates",l))}),i()()()(),n(98,"div",13)(99,"h3",14)(100,"mat-icon"),r(101,"video_chat"),i(),r(102," Availability & pricing"),i(),n(103,"div",33)(104,"mat-slide-toggle",34)(105,"mat-icon"),r(106,"chat"),i(),r(107," Chat"),i(),n(108,"mat-slide-toggle",35)(109,"mat-icon"),r(110,"call"),i(),r(111," Voice"),i(),n(112,"mat-slide-toggle",36)(113,"mat-icon"),r(114,"videocam"),i(),r(115," Video"),i()(),n(116,"mat-form-field",16)(117,"mat-label"),r(118,"Voice / video provider"),i(),n(119,"mat-select",37),p(120,Fe,2,2,"mat-option",22),i()(),n(121,"div",38),p(122,Ve,20,2,"div",39),i()(),n(123,"div",13)(124,"h3",14)(125,"mat-icon"),r(126,"policy"),i(),r(127," Policies"),i(),n(128,"div",40)(129,"mat-form-field",18)(130,"mat-label"),r(131,"Cancellation window (hours)"),i(),f(132,"input",41),i(),n(133,"mat-form-field",18)(134,"mat-label"),r(135,"Reschedule window (hours)"),i(),f(136,"input",42),i(),n(137,"mat-slide-toggle",43),r(138,"Refund policy enabled"),i()(),n(139,"div",44)(140,"button",10),y("click",function(){x(t);let l=d();return b(l.reset())}),n(141,"mat-icon"),r(142,"refresh"),i(),r(143," Reset "),i(),n(144,"button",45),y("click",function(){x(t);let l=d();return b(l.save())}),n(145,"mat-icon"),r(146),i(),r(147),i()()()(),n(148,"aside",46)(149,"div",47)(150,"header",48),f(151,"img",49),n(152,"div",50)(153,"h3"),r(154),i(),n(155,"div",51)(156,"span",52),r(157),i(),f(158,"span",53),n(159,"span",54),r(160),i()(),p(161,ke,5,1,"div",55)(162,Ae,5,1,"div",55),i()(),n(163,"section",56)(164,"h4")(165,"mat-icon"),r(166,"info"),i(),r(167," About"),i(),n(168,"p",8),r(169),i()(),p(170,ze,7,1,"section",57),n(171,"section",56)(172,"h4")(173,"mat-icon"),r(174,"chat"),i(),r(175," Languages"),i(),n(176,"div",30),p(177,$e,2,1,"span",31)(178,Le,2,0,"span",58),i()(),n(179,"section",56)(180,"h4")(181,"mat-icon"),r(182,"local_hospital"),i(),r(183," Hospitals / clinics"),i(),n(184,"ul"),p(185,je,2,1,"li",59)(186,Be,2,0,"li",58),i()(),n(187,"section",56)(188,"h4")(189,"mat-icon"),r(190,"school"),i(),r(191," Education"),i(),n(192,"ul"),p(193,He,2,1,"li",59)(194,Ye,2,0,"li",58),i()(),n(195,"section",56)(196,"h4")(197,"mat-icon"),r(198,"workspace_premium"),i(),r(199," Certificates"),i(),n(200,"ul"),p(201,qe,2,1,"li",59)(202,Je,2,0,"li",58),i()()()(),T()}if(o&2){let t=d();a(),c("ngIf",t.apiError),a(),c("formGroup",t.form),a(3),c("src",t.fc.avatarUrl.value||"https://i.pravatar.cc/160?img=15",D),a(7),c("disabled",t.saving),a(4),c("disabled",t.saving),a(2),g(t.saving?"hourglass_bottom":"save"),a(2),g(t.saving?"Saving\u2026":"Save changes"),a(19),c("value",null),a(2),c("ngForOf",t.departments),a(9),c("ngForOf",t.timezones),a(28),c("ngForOf",t.array("languages").controls),a(6),c("ngForOf",t.array("hospitals").controls),a(6),c("ngForOf",t.array("education").controls),a(6),c("ngForOf",t.array("certificates").controls),a(24),c("ngForOf",t.meetingProviders),a(2),c("ngForOf",t.pricingControls()),a(18),c("disabled",t.saving),a(4),c("disabled",t.saving),a(2),g(t.saving?"hourglass_bottom":"save"),a(),E(" ",t.saving?"Saving\u2026":"Save changes"," "),a(4),c("src",t.preview().avatarUrl,D),a(3),g(t.preview().fullName),a(3),g(t.preview().title),a(3),g(t.preview().department),a(),c("ngIf",t.preview().yearsOfExperience),a(),c("ngIf",t.preview().phone),a(7),g(t.preview().bio||"Fill in your bio to showcase your expertise."),a(),c("ngIf",t.preview().pricing.length>0),a(7),c("ngForOf",t.preview().languages),a(),c("ngIf",!t.preview().languages.length),a(7),c("ngForOf",t.preview().hospitals),a(),c("ngIf",!t.preview().hospitals.length),a(7),c("ngForOf",t.preview().education),a(),c("ngIf",!t.preview().education.length),a(7),c("ngForOf",t.preview().certificates),a(),c("ngIf",!t.preview().certificates.length)}}function Qe(o,e){o&1&&(n(0,"div",73)(1,"mat-icon"),r(2,"hourglass_empty"),i(),n(3,"span"),r(4,"Loading your profile\u2026"),i()())}var We=["CHAT","VOICE","VIDEO"],xe=class o{fb=w(Z);profileService=w(de);snackBar=w(se);departments=[];meetingProviders=["Google Meet","Zoom","Microsoft Teams","Webex"];form;loadingProfile=!0;saving=!1;apiError=null;profileSub;formChangesSub;currentProfile=null;previewModel=this.buildPreview();timezone;timezones=["Africa/Cairo","Asia/Riyadh","Asia/Dubai","Europe/London","America/New_York"];constructor(){this.form=this.buildForm(),this.formChangesSub=this.form.valueChanges.subscribe(()=>this.updatePreview()),this.updatePreview()}ngOnInit(){this.profileSub=this.profileService.loadProfile().subscribe({next:e=>{console.log("Loaded profile:",e),e.status==="REJECTED"&&this.snackBar.open(`Your profile was rejected.
Reason: ${e.rejectionReason}`,"Close"),this.applyProfile(e),this.loadingProfile=!1},error:e=>{this.apiError=e,this.loadingProfile=!1}}),this.fetchDepartments()}ngOnDestroy(){this.profileSub?.unsubscribe(),this.formChangesSub?.unsubscribe()}fetchDepartments(){this.profileService.getDepartments().subscribe({next:e=>{this.departments=Array.isArray(e)?e:[]},error:e=>{let t=typeof e=="string"?e:e?.message||"Unknown error"}})}get fc(){return{fullName:this.form.get("fullName"),title:this.form.get("title"),department:this.form.get("department"),yearsOfExperience:this.form.get("yearsOfExperience"),licenseNumber:this.form.get("licenseNumber"),avatarUrl:this.form.get("avatarUrl"),bio:this.form.get("bio"),phone:this.form.get("phone"),videoProvider:this.form.get("videoProvider"),cancellationPolicy:this.form.get("cancellationPolicy"),noShowPolicy:this.form.get("noShowPolicy"),reschedulePolicy:this.form.get("reschedulePolicy"),timezone:this.form.get("timezone")}}get availabilityGroup(){return this.form.get("availability")}get availabilityChat(){return this.availabilityGroup.get("chat")}get availabilityVoice(){return this.availabilityGroup.get("voice")}get availabilityVideo(){return this.availabilityGroup.get("video")}get pricingArray(){return this.form.get("pricing")}pricingControls(){return this.pricingArray.controls}array(e){return this.form.get(e)}trackIndex=e=>e;onChipEnter(e,t){let m=t.target,l=(m?.value??"").trim();l&&(this.array(e).push(this.fb.control(l,{nonNullable:!0})),m.value="")}removeChip(e,t){this.array(e).removeAt(t)}reset(){this.currentProfile?this.applyProfile(this.currentProfile):(this.form.reset(this.buildForm().getRawValue()),this.updatePreview())}save(){if(this.form.invalid){this.form.markAllAsTouched();return}let e=this.preparePayload();if(!e)return;let{payload:t,languagesCount:m,allServicesCovered:l,hasAvailability:s}=e,_=[];if(t.title||_.push("professional title"),t.bio||_.push("bio"),t.department||_.push("department"),(t.yearsOfExperience==null||t.yearsOfExperience<=0)&&_.push("years of experience"),t.licenseNumber||_.push("license number"),t.avatarUrl||_.push("profile image"),t.phone||_.push("phone number"),m===0&&_.push("languages"),(!t.pricing||t.pricing.length===0||!l)&&_.push("pricing for chat, voice, and video"),s||_.push("choose at least one availability option"),_.length){let u="Please complete: "+_.join(", ");this.apiError=u,this.snackBar.open(u,"Close",{duration:6e3,panelClass:["snack-error"]});return}this.saving=!0,this.apiError=null,this.profileService.updateProfile(t).pipe(V(()=>this.profileService.refreshProfile()),F(()=>this.saving=!1)).subscribe({next:u=>{this.applyProfile(u),this.snackBar.open("Request sent successfully. Please wait for the admin\u2019s feedback.","OK",{duration:2500})},error:u=>{console.error("Error updating profile:",u),this.apiError=u}})}preview(){return this.previewModel}priceLabel(e){return`${e.price} ${e.currency}`}buildForm(){return this.fb.group({fullName:this.fb.control("Doctor name",{nonNullable:!0}),title:this.fb.control("",{nonNullable:!0}),department:this.fb.control(null),yearsOfExperience:this.fb.control(null),licenseNumber:this.fb.control("",{nonNullable:!0}),avatarUrl:this.fb.control("https://i.pravatar.cc/160?img=15",{nonNullable:!0}),bio:this.fb.control("",{nonNullable:!0}),phone:this.fb.control("",{nonNullable:!0}),languages:this.fb.array([],{updateOn:"change"}),hospitals:this.fb.array([],{updateOn:"change"}),education:this.fb.array([],{updateOn:"change"}),certificates:this.fb.array([],{updateOn:"change"}),availability:this.fb.group({chat:this.fb.control(!0,{nonNullable:!0}),voice:this.fb.control(!1,{nonNullable:!0}),video:this.fb.control(!0,{nonNullable:!0})}),pricing:this.fb.array([this.createPricingGroup("Chat"),this.createPricingGroup("Voice"),this.createPricingGroup("Video")]),videoProvider:this.fb.control("Google Meet",{nonNullable:!0}),cancellationPolicy:this.fb.control(2,{validators:[N.min(0)]}),noShowPolicy:this.fb.control(!0,{nonNullable:!0}),reschedulePolicy:this.fb.control(1,{validators:[N.min(0)]})})}createPricingGroup(e){return this.fb.group({service:[e],USD:[0],SAR:[0],EGP:[0],AED:[0]})}preparePayload(){let e=this.form.getRawValue(),t=h=>(h??[]).map(P=>(P??"").trim()).filter(P=>!!P),m=t(e.languages),l=t(e.hospitals),s=t(e.education),_=t(e.certificates),u=[];this.pricingControls().forEach(h=>{let P=(h.get("service")?.value||"").toUpperCase();[{currency:"USD",price:Number(h.get("USD")?.value)||0},{currency:"SAR",price:Number(h.get("SAR")?.value)||0},{currency:"EGP",price:Number(h.get("EGP")?.value)||0},{currency:"AED",price:Number(h.get("AED")?.value)||0}].forEach(I=>{u.push({service:P,currency:I.currency,price:I.price})})});let v=this.availabilityGroup.getRawValue(),O=v.chat||v.voice||v.video,M=h=>{let P=Number(h);return Number.isFinite(P)?P:void 0},be=M(e.yearsOfExperience),ye=M(e.cancellationPolicy),Ce=M(e.reschedulePolicy),Pe=typeof e.department=="object"?e.department?.name:this.departments.find(h=>h.id===e.department)?.name,C={fullName:e.fullName?.trim()||void 0,title:e.title?.trim()||void 0,bio:e.bio?.trim()||void 0,department:Pe,yearsOfExperience:be,licenseNumber:e.licenseNumber?.trim()||void 0,avatarUrl:e.avatarUrl?.trim()||void 0,phone:e.phone?.trim()||void 0,languages:m,hospitals:l,education:s,certificates:_,pricing:u,availability:v,videoProvider:e.videoProvider?.trim()||void 0,cancellationPolicy:ye,noShowPolicy:e.noShowPolicy??void 0,reschedulePolicy:Ce,timezone:e.timezone||"Africa/Cairo"};C.languages?.length||delete C.languages,C.hospitals?.length||delete C.hospitals,C.education?.length||delete C.education,C.certificates?.length||delete C.certificates,C.pricing?.length||delete C.pricing;let Ee=We.every(h=>u.some(P=>P.service===h));return{payload:C,languagesCount:m.length,allServicesCovered:Ee,hasAvailability:O}}applyProfile(e){this.currentProfile=e,this.apiError=null,this.fc.fullName.setValue(e.fullName??"Doctor name"),this.fc.title.setValue(e.title??""),this.fc.department.setValue(e.department??null),this.fc.yearsOfExperience.setValue(e.yearsOfExperience??null),this.fc.licenseNumber.setValue(e.licenseNumber??""),this.fc.avatarUrl.setValue(e.avatarUrl??""),this.fc.bio.setValue(e.bio??""),this.fc.phone.setValue(e.phone??""),this.fc.videoProvider.setValue(e.videoProvider??"Google Meet"),this.fc.cancellationPolicy.setValue(e.cancellationPolicy??2),this.fc.noShowPolicy.setValue(e.noShowPolicy??!0),this.fc.reschedulePolicy.setValue(e.reschedulePolicy??1),this.setArray("languages",e.languages??[]),this.setArray("hospitals",e.hospitals??[]),this.setArray("education",e.education??[]),this.setArray("certificates",e.certificates??[]);let t=e.availability??{chat:!0,voice:!1,video:!0};this.availabilityGroup.patchValue({chat:!!t.chat,voice:!!t.voice,video:!!t.video});let m=new Map;if(e.pricing&&Array.isArray(e.pricing)){let l=this.pricingArray;l.clear();let s={};for(let u of e.pricing){let v=u.service?.toUpperCase();s[v]||(s[v]={}),s[v][u.currency]=u.price}["CHAT","VOICE","VIDEO"].forEach(u=>{let v=s[u]||{},O=this.fb.group({service:[u],USD:[v.USD??0],SAR:[v.SAR??0],EGP:[v.EGP??0],AED:[v.AED??0]});l.push(O)})}else{let l=this.pricingArray;l.clear(),["CHAT","VOICE","VIDEO"].forEach(s=>l.push(this.createPricingGroup(s)))}this.form.markAsPristine(),this.updatePreview()}setArray(e,t){let m=this.array(e);for(;m.length;)m.removeAt(0);(t??[]).filter(l=>!!l&&typeof l=="string").forEach(l=>m.push(this.fb.control(l,{nonNullable:!0})))}updatePreview(){let e=this.form.getRawValue(),t=typeof e.department=="object"?e.department?.name:this.departments.find(l=>l.id===e.department)?.name??"Department pending",m=this.pricingControls().map(l=>l.getRawValue()).filter(l=>Number(l.price??0)>0).map(l=>({service:l.service,currency:(l.currency??"USD").toUpperCase(),price:Number(l.price??0)}));this.previewModel={fullName:e.fullName||"Doctor name",title:e.title||"Speciality",department:t,yearsOfExperience:e.yearsOfExperience??void 0,licenseNumber:e.licenseNumber||void 0,avatarUrl:e.avatarUrl||"https://i.pravatar.cc/160?img=15",bio:e.bio||"",phone:e.phone||void 0,languages:e.languages??[],hospitals:e.hospitals??[],education:e.education??[],certificates:e.certificates??[],pricing:m,availability:this.availabilityGroup.getRawValue(),videoProvider:e.videoProvider??void 0}}buildPreview(){return{fullName:"Doctor name",title:"Speciality",department:"Department pending",yearsOfExperience:void 0,licenseNumber:void 0,avatarUrl:"https://i.pravatar.cc/160?img=15",bio:"",phone:void 0,languages:[],hospitals:[],education:[],certificates:[],pricing:[],availability:{chat:!0,voice:!1,video:!0},videoProvider:void 0}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=k({type:o,selectors:[["app-doc-profile"]],decls:4,vars:4,consts:[["loadingState",""],[1,"profile-shell"],[4,"ngIf","ngIfElse"],["class","alerts",4,"ngIf"],[1,"panel","form-panel",3,"formGroup"],[1,"panel-head"],[1,"id"],["alt","avatar",1,"avatar",3,"src"],[1,"muted"],[1,"actions"],["mat-stroked-button","","type","button",3,"click","disabled"],["mat-flat-button","","color","primary","type","button",1,"responsive-btn",3,"click","disabled"],[1,"btn-text"],[1,"section"],[1,"section-title"],[1,"grid"],["appearance","outline",1,"full"],["matInput","","formControlName","fullName"],["appearance","outline"],["matInput","","formControlName","title","placeholder","Consultant cardiologist, GP, etc."],["formControlName","department"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","0","formControlName","yearsOfExperience"],["formControlName","timezone"],["matInput","","formControlName","licenseNumber"],["matInput","","formControlName","avatarUrl"],["matInput","","formControlName","phone","placeholder","+20xxxxxxxxxx"],["matInput","","rows","4","formControlName","bio"],[1,"chip-row"],[1,"chips"],["class","chip",4,"ngFor","ngForOf"],["placeholder","Add & Enter",1,"chip-input",3,"keydown.enter"],["formGroupName","availability",1,"mods"],["formControlName","chat"],["formControlName","voice"],["formControlName","video"],["formControlName","videoProvider"],["formArrayName","pricing"],["class","pricing-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"policy-grid"],["matInput","","type","number","min","0","formControlName","cancellationPolicy"],["matInput","","type","number","min","0","formControlName","reschedulePolicy"],["formControlName","noShowPolicy"],[1,"footer-actions"],["mat-flat-button","","color","primary","type","button",3,"click","disabled"],[1,"panel","preview-panel"],[1,"doc-card"],[1,"head"],["alt","",1,"avatar-lg",3,"src"],[1,"meta"],[1,"sub"],[1,"title"],[1,"dot"],[1,"pill"],["class","sub",4,"ngIf"],[1,"preview-section"],["class","preview-section",4,"ngIf"],["class","muted",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"alerts"],[1,"chip"],["type","button",1,"x",3,"click"],[1,"pricing-row",3,"formGroupName"],[1,"currency-grid"],["matInput","","type","number","formControlName","USD"],["matInput","","type","number","formControlName","SAR"],["matInput","","type","number","formControlName","EGP"],["matInput","","type","number","formControlName","AED"],[1,"pricing-preview"],["class","price-pill",4,"ngFor","ngForOf"],[1,"price-pill"],[4,"ngIf"],[1,"loading-state"]],template:function(t,m){if(t&1&&(n(0,"div",1),p(1,Ke,203,36,"ng-container",2),i(),p(2,Qe,5,0,"ng-template",null,0,R)),t&2){let l=G(3);U("loading",m.loadingProfile),a(),c("ngIf",!m.loadingProfile)("ngIfElse",l)}},dependencies:[L,z,$,X,j,Y,B,H,W,q,Q,J,K,oe,re,ie,ne,me,ce,fe,ge,ue,he,ve,le,ae,te,ee,_e,pe],styles:['@charset "UTF-8";.profile-shell[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,1fr) 360px;gap:1.25rem;padding:1.25rem}.profile-shell.loading[_ngcontent-%COMP%]{opacity:.7}@media (max-width: 1100px){.profile-shell[_ngcontent-%COMP%]{grid-template-columns:1fr}}.alerts[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border-radius:14px;border:1px solid rgba(255,150,150,.35);background:#ff5f5f1f;color:#ffd4d4}.loading-state[_ngcontent-%COMP%]{grid-column:1/-1;min-height:280px;display:grid;place-items:center;gap:.5rem;color:var(--muted)}.loading-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:38px;width:38px;height:38px}.panel[_ngcontent-%COMP%]{background:linear-gradient(180deg,#ffffff08,#ffffff05);border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 10px 40px #00000040;overflow:hidden;animation:_ngcontent-%COMP%_fadeUp .4s ease both}@keyframes _ngcontent-%COMP%_fadeUp{0%{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}.form-panel[_ngcontent-%COMP%]{padding:1rem 1rem 1.5rem}.panel-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;padding:0 0 1rem;border-bottom:1px solid rgba(255,255,255,.06)}.panel-head[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.9rem}.panel-head[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:16px;object-fit:cover;box-shadow:0 5px 18px #00000059}.panel-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:800;letter-spacing:.2px}.panel-head[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{color:var(--muted);margin:.15rem 0 0}.panel-head[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.section[_ngcontent-%COMP%]{padding:1rem 0 .6rem}.section[_ngcontent-%COMP%] + .section[_ngcontent-%COMP%]{border-top:1px solid rgba(255,255,255,.06);margin-top:1rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:.2rem 0 .9rem;font-weight:700}.section-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.9rem}.grid[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{grid-column:1/-1}@media (max-width: 720px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chip-row[_ngcontent-%COMP%]{margin:1rem 0}.chip-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:500;color:var(--muted);margin-bottom:.4rem;letter-spacing:.3px}.chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.5rem;padding:.4rem;background:#ffffff08;border-radius:.6rem;transition:border .2s ease}.chip[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid rgba(255,255,255,.15);padding:.35rem .7rem;border-radius:999px;display:inline-flex;align-items:center;gap:.35rem;color:var(--text);font-size:.85rem;transition:all .2s ease}.chip[_ngcontent-%COMP%]:hover{background:#ffffff1f;border-color:#ffffff40}.chip[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--muted);cursor:pointer;line-height:1;font-weight:700;transition:color .2s}.chip[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]:hover{color:var(--primary)}.chip-input[_ngcontent-%COMP%]{background:transparent;border:1px dashed rgba(255,255,255,.2);color:var(--text);padding:.35rem .7rem;border-radius:999px;outline:none;min-width:120px;font-size:.85rem;transition:border-color .2s ease,background .2s ease}.chip-input[_ngcontent-%COMP%]:focus{border-color:var(--primary);background:#ffffff0d}.mods[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:.6rem}.pricing-grid[_ngcontent-%COMP%]{display:grid;gap:.6rem}.pricing-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto repeat(2,minmax(0,1fr));gap:.6rem;align-items:center;padding:.55rem;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:#ffffff05}.service-chip[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;padding:.35rem .75rem;border-radius:999px;background:#2a76b72e;border:1px solid rgba(42,118,183,.35);color:#b9d9ff;font-size:.85rem;font-weight:600}.policy-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.9rem;align-items:center}.policy-grid[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{grid-column:1/-1}.footer-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:flex-end;margin-top:.8rem}.preview-panel[_ngcontent-%COMP%]{padding:.9rem}.doc-card[_ngcontent-%COMP%]{padding:1rem;display:grid;gap:1rem}.head[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto minmax(0,1fr);gap:.9rem;align-items:center;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:.75rem}.avatar-lg[_ngcontent-%COMP%]{width:74px;height:74px;border-radius:18px;object-fit:cover;box-shadow:0 6px 20px #00000059}.meta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:800}.sub[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;margin-top:.15rem;color:var(--muted);font-size:.85rem}.sub[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.pill[_ngcontent-%COMP%]{background:#2a76b729;border:1px solid rgba(42,118,183,.35);color:#b9d9ff;padding:.15rem .6rem;border-radius:999px;font-size:.78rem}.preview-section[_ngcontent-%COMP%]{display:grid;gap:.45rem}.preview-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;margin:0;font-weight:700}.preview-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1.1rem;display:grid;gap:.25rem;color:var(--muted)}.pricing-preview[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.6rem}.price-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem;padding:.4rem .65rem;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:#ffffff08;font-size:.85rem}.price-pill[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.bio[_ngcontent-%COMP%]{margin:0;color:var(--muted);line-height:1.5}.muted[_ngcontent-%COMP%]{color:var(--muted)}.currency-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;grid-column:1/-1}  .snack-error{background-color:#b71c1c!important;color:#fff!important;font-weight:500}.responsive-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px;padding:.6rem 1rem;font-size:.95rem;flex-wrap:wrap;text-align:center}@media (max-width: 480px){.responsive-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem .8rem}.responsive-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}}']})};export{xe as DocProfileComponent};
