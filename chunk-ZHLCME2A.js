import{a as Y}from"./chunk-GJDA3GCF.js";import{a as V}from"./chunk-GWAIMEWH.js";import{a as q,b as z,c as B,d as F,e as H,f as X}from"./chunk-ZKK6I43Z.js";import{b as W}from"./chunk-ERB7QXXO.js";import{a as J,b as K,c as Q}from"./chunk-CLUQOUFA.js";import{b as G}from"./chunk-HAB3F6YE.js";import"./chunk-GGQ7LRWG.js";import"./chunk-6ZCLRSJ3.js";import{c as N,d as U,f,g as j}from"./chunk-NQP6NLRO.js";import"./chunk-SU4XVCYB.js";import"./chunk-FGBTXBWS.js";import"./chunk-FMDUD5PD.js";import"./chunk-A7RO7YMV.js";import{a as T,b as D}from"./chunk-4P6M4J7Y.js";import{c as S,d as y,e as w,f as L,h as E}from"./chunk-LC7HZC43.js";import"./chunk-YXOZBBHG.js";import"./chunk-CCREW7CN.js";import"./chunk-X74WTQLY.js";import{T as A,Y as I,Z as R}from"./chunk-WXJKX6WL.js";import{$b as C,Nb as c,Ob as t,Pb as e,Qb as l,Xa as x,Xb as v,Zb as g,_a as m,db as M,fa as s,gd as O,jc as h,kb as b,la as d,ma as p,nc as n,pb as _,pc as k,rd as P}from"./chunk-PCHMKQLW.js";function et(r,o){if(r&1&&(t(0,"span",23),n(1),e()),r&2){let i=C();m(),k(" ",i.unreadCount," ")}}var Z=class r{constructor(o){this.router=o}logoUrl="https://ik.imagekit.io/a2wpi1kd9/imgToUrl/image-to-url_HEow9eLbR";adminService=s(Y);unreadCount=0;adminSocket=s(V);ngOnInit(){this.adminService.getNotifications().subscribe({next:i=>{this.unreadCount=i.filter(a=>!a.read).length,console.log("Unread notifications count:",this.unreadCount)},error:i=>{let a=typeof i=="string"?i:i?.message||"Failed to load notifications";console.error(a)}});let o=this.adminSocket.getSocket()??this.adminSocket.connect();o&&(o.off("admin:notification:new"),o.on("admin:notification:new",i=>{console.log("New notification received via socket:",i),this.unreadCount+=1}))}logout(){this.router.navigate(["/auth/login"])}static \u0275fac=function(i){return new(i||r)(M(y))};static \u0275cmp=b({type:r,selectors:[["app-admin-layout"]],decls:69,vars:3,consts:[["snav",""],[1,"shell"],["mode","side","opened","",1,"side"],[1,"brand"],["alt","Medtik",1,"brand-logo",3,"src"],["mat-list-item","","routerLink","users","routerLinkActive","active"],["mat-list-item","","routerLink","transactions","routerLinkActive","active"],["mat-list-item","","routerLink","add-doctor","routerLinkActive","active"],["mat-list-item","","routerLink","doctor-requests","routerLinkActive","active"],["mat-list-item","","routerLink","departments","routerLinkActive","active"],["mat-list-item","","routerLink","settings","routerLinkActive","active"],["mat-list-item","","routerLink","notifications","routerLinkActive","active",1,"notification-link"],[1,"notification-icon"],["class","notification-count",4,"ngIf"],["mat-list-item","","routerLink","help","routerLinkActive","active"],[1,"content"],[1,"topbar"],["mat-icon-button","",1,"hide-desktop",3,"click"],[1,"grow"],["mat-stroked-button","","color","primary","routerLink","/admin/doctor-requests"],["mat-button","",1,"user"],["mat-icon-button","","color","warn",3,"click"],[1,"page"],[1,"notification-count"]],template:function(i,a){if(i&1){let u=v();t(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0)(3,"div",3),l(4,"img",4),t(5,"span"),n(6,"Medtik \u2022 Admin"),e()(),t(7,"mat-nav-list")(8,"a",5)(9,"mat-icon"),n(10,"group"),e(),t(11,"span"),n(12,"Users"),e()(),t(13,"a",6)(14,"mat-icon"),n(15,"receipt_long"),e(),t(16,"span"),n(17,"Transactions"),e()(),t(18,"a",7)(19,"mat-icon"),n(20,"person_add"),e(),t(21,"span"),n(22,"Add Doctor"),e()(),t(23,"a",8)(24,"mat-icon"),n(25,"how_to_reg"),e(),t(26,"span"),n(27,"Doctor Requests"),e()(),t(28,"a",9)(29,"mat-icon"),n(30,"apartment"),e(),t(31,"span"),n(32,"Departments"),e()(),t(33,"a",10)(34,"mat-icon"),n(35,"settings"),e(),t(36,"span"),n(37,"Settings"),e()(),t(38,"a",11)(39,"div",12)(40,"mat-icon"),n(41," notifications "),e(),_(42,et,2,1,"span",13),e(),t(43,"span"),n(44,"Notifications"),e()(),t(45,"a",14)(46,"mat-icon"),n(47,"help"),e(),t(48,"span"),n(49,"Help"),e()()()(),t(50,"mat-sidenav-content",15)(51,"mat-toolbar",16)(52,"button",17),g("click",function(){d(u);let tt=h(2);return p(tt.toggle())}),t(53,"mat-icon"),n(54,"menu"),e()(),l(55,"span",18),t(56,"button",19)(57,"mat-icon"),n(58,"inbox"),e(),n(59," Review Requests "),e(),t(60,"button",20)(61,"mat-icon"),n(62,"admin_panel_settings"),e(),n(63," Admin "),e(),t(64,"button",21),g("click",function(){return d(u),p(a.logout())}),t(65,"mat-icon"),n(66,"logout"),e()()(),t(67,"div",22),l(68,"router-outlet"),e()()()}i&2&&(m(),c("@slideIn",void 0),m(3),c("src",a.logoUrl,x),m(38),c("ngIf",a.unreadCount>0))},dependencies:[P,O,E,S,w,L,F,z,B,q,X,H,Q,K,J,D,T,R,I,A,W,G],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;min-height:100dvh;background:transparent}.shell[_ngcontent-%COMP%]{height:100dvh;background:transparent}.side[_ngcontent-%COMP%]{width:300px;background:#ffffff05;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-right:1px solid rgba(255,255,255,.06)}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem .9rem}.brand-logo[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:contain;display:block;filter:drop-shadow(0 6px 16px rgba(42,118,183,.45))}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:800;font-size:1.05rem;letter-spacing:.3px}.mat-mdc-list-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:.5rem;color:var(--muted);vertical-align:middle;display:inline-flex;align-items:center;justify-content:center;margin-bottom:-2px}.mat-mdc-list-item.active[_ngcontent-%COMP%]{background:#ffffff0a;border-left:3px solid rgba(42,118,183,.7)}.mat-mdc-list-item.active[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-mdc-list-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text)}.content[_ngcontent-%COMP%]   .topbar[_ngcontent-%COMP%]{background:transparent;color:var(--text);border-bottom:1px solid rgba(255,255,255,.06)}.hide-desktop[_ngcontent-%COMP%]{display:none}.grow[_ngcontent-%COMP%]{flex:1 1 auto}.page[_ngcontent-%COMP%]{padding:1.25rem}@media (max-width: 960px){.hide-desktop[_ngcontent-%COMP%]{display:inline-flex}.side[_ngcontent-%COMP%]{width:260px}.brand-logo[_ngcontent-%COMP%]{width:44px;height:44px}}a[mat-list-item][_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.85rem 1.25rem;color:#fffc;text-decoration:none;transition:all .25s ease;border-left:3px solid transparent;position:relative;overflow:visible!important}a[mat-list-item][_ngcontent-%COMP%]:hover{background:#ffffff14;color:#fff}a[mat-list-item].active[_ngcontent-%COMP%]{background:#2a76b726;border-left-color:#2a76b7e6;color:#fff}a[mat-list-item][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;color:#ffffffbf;transition:color .25s ease}a[mat-list-item].active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], a[mat-list-item][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#2a96ffe6}.icon-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.notification-icon[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:28px;margin-left:3px}.notification-count[_ngcontent-%COMP%]{position:absolute;top:-2px;right:-4px;background-color:#ff3b3b;color:#fff;font-size:11px;font-weight:700;padding:2px 5px;border-radius:10px;line-height:1}.content[_ngcontent-%COMP%]   .topbar[_ngcontent-%COMP%]{background:transparent;color:var(--text);border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;padding:0 1rem}button.mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffd9}button.mat-stroked-button[_ngcontent-%COMP%]{border-color:#2a76b7cc}.page[_ngcontent-%COMP%]{padding:1.5rem}@media (max-width: 960px){.side[_ngcontent-%COMP%]{width:250px}.brand-logo[_ngcontent-%COMP%]{width:44px;height:44px}}[_nghost-%COMP%]     .mat-drawer-container, [_nghost-%COMP%]     .mat-drawer-content, [_nghost-%COMP%]     .mat-sidenav-content, [_nghost-%COMP%]     .content, [_nghost-%COMP%]     .page, [_nghost-%COMP%]     .topbar{background:transparent!important}[_nghost-%COMP%]     .mdc-list-item__content, [_nghost-%COMP%]     .mdc-list-item__primary-text{display:flex!important;flex-direction:row!important;align-items:center!important;gap:12px!important;width:100%!important}'],data:{animation:[N("slideIn",[j(":enter",[f({transform:"translateX(-8px)",opacity:0}),U("300ms ease-out",f({transform:"none",opacity:1}))])])]}})};export{Z as AdminLayoutComponent};
