import{a as de,b as pe}from"./chunk-Y7I5B6DV.js";import{a as ce}from"./chunk-QW23XC2O.js";import{a as ae,b as re,e as se,f as le}from"./chunk-OZHLN6UI.js";import{a as ie,b as oe}from"./chunk-6OHLFMF7.js";import{a as ee,d as te}from"./chunk-DYEZBW6N.js";import{h as ne}from"./chunk-EAVN2IX3.js";import"./chunk-OZY4EI32.js";import{b as L,c as W}from"./chunk-EEDQUWWO.js";import{a as K,b as Q}from"./chunk-FNX66O3M.js";import"./chunk-MS4AQ6UA.js";import{a as X,b as Y,d as Z}from"./chunk-GNF7NEE4.js";import"./chunk-JXSMCY7E.js";import"./chunk-3RK6DDJD.js";import{a as U,h as $,m as J,n as H}from"./chunk-AK7HCWPM.js";import"./chunk-SCUZIYM3.js";import"./chunk-HRQB4EEZ.js";import"./chunk-GED64AQA.js";import"./chunk-Z4D3JJEG.js";import{b as G}from"./chunk-ENKIQ3XX.js";import{b as F,f as V,k as z,z as N}from"./chunk-K2DA6FBL.js";import{Y as j,Z as B}from"./chunk-LVPX6TEL.js";import"./chunk-P6PSD35X.js";import{$a as f,Ab as P,Cb as u,Eb as d,Fc as I,Gc as k,Ia as w,La as a,Ob as E,Oc as A,Rc as T,Sb as i,Tb as _,Ub as x,Wa as S,Xb as O,Yb as v,Zb as b,bc as R,dc as q,ea as C,fc as y,gc as D,ja as m,ka as g,qb as c,rb as n,sb as t,ta as M,tb as h}from"./chunk-WZIMFKHB.js";var ue=()=>[9,18,27];function _e(r,o){r&1&&(n(0,"div",15),i(1," No doctor update requests found. "),t())}function fe(r,o){if(r&1&&(n(0,"div",29)(1,"h4"),i(2,"\u{1F5BC}\uFE0F Avatar"),t(),h(3,"img",30),t()),r&2){let e=d().$implicit;a(3),c("src",e.payload.avatar.avatarUrl,w)}}function xe(r,o){if(r&1&&(n(0,"div",29)(1,"h4"),i(2,"\u{1FA7A} Service"),t(),n(3,"p")(4,"strong"),i(5,"Title:"),t(),i(6),t(),n(7,"p")(8,"strong"),i(9,"Bio:"),t(),i(10),t(),n(11,"p")(12,"strong"),i(13,"License:"),t(),i(14),t()()),r&2){let e=d().$implicit;a(6),x(" ",e.payload.service.title),a(4),x(" ",e.payload.service.bio),a(4),x(" ",e.payload.service.licenseNumber)}}function Ce(r,o){if(r&1&&(n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t()()),r&2){let e=o.$implicit;a(2),_(e.service),a(2),_(e.price),a(2),_(e.currency)}}function Me(r,o){if(r&1&&(n(0,"div",29)(1,"h4"),i(2,"\u{1F4B0} Pricing"),t(),n(3,"table",31)(4,"thead")(5,"tr")(6,"th"),i(7,"Service"),t(),n(8,"th"),i(9,"Price"),t(),n(10,"th"),i(11,"Currency"),t()()(),n(12,"tbody"),f(13,Ce,7,3,"tr",32),t()()()),r&2){let e=d().$implicit;a(13),c("ngForOf",e.payload.pricing)}}function he(r,o){if(r&1){let e=P();n(0,"mat-expansion-panel",16)(1,"mat-expansion-panel-header")(2,"div",17)(3,"div",18)(4,"span",19),i(5),t(),n(6,"small",20),i(7),t()(),n(8,"div",21)(9,"mat-chip",22),i(10),t(),n(11,"span",23),i(12),q(13,"date"),t()()()(),n(14,"div",24)(15,"p")(16,"strong"),i(17,"Created:"),t(),i(18),q(19,"date"),t(),f(20,fe,4,1,"div",25)(21,xe,15,3,"div",25)(22,Me,14,1,"div",25),t(),n(23,"mat-card-actions")(24,"button",26),u("click",function(){let s=m(e).$implicit,l=d(2);return g(l.acceptRequest(s.id))}),i(25," Accept "),t(),n(26,"button",27),u("click",function(){let s=m(e).$implicit,l=d(2);return g(l.rejectRequest(s.id))}),i(27," Reject "),t(),n(28,"button",28),u("click",function(){let s=m(e).$implicit,l=d(2);return g(l.deleteRequest(s.id))}),i(29," Delete "),t()()()}if(r&2){let e=o.$implicit;a(5),_((e.doctor==null||e.doctor.user==null?null:e.doctor.user.fullName)||"Unknown Doctor"),a(2),_(e.doctor==null||e.doctor.user==null?null:e.doctor.user.email),a(2),c("color",e.status==="APPROVED"?"primary":e.status==="REJECTED"?"warn":"accent"),a(),x(" ",e.status," "),a(2),_(y(13,11,e.createdAt,"short")),a(6),x(" ",y(19,14,e.createdAt,"short")),a(2),c("ngIf",e.payload==null?null:e.payload.avatar),a(),c("ngIf",e.payload==null?null:e.payload.service),a(),c("ngIf",e.payload==null||e.payload.pricing==null?null:e.payload.pricing.length),a(2),c("disabled",e.status!=="PENDING"),a(2),c("disabled",e.status!=="PENDING")}}function Pe(r,o){if(r&1){let e=P();n(0,"div",2)(1,"div",3)(2,"mat-form-field",4)(3,"mat-label"),i(4,"Search Doctor"),t(),n(5,"input",5),b("ngModelChange",function(s){m(e);let l=d();return v(l.filterText,s)||(l.filterText=s),g(s)}),u("input",function(){m(e);let s=d();return g(s.applyFilters())}),t()(),n(6,"mat-form-field",4)(7,"mat-label"),i(8,"Status"),t(),n(9,"mat-select",6),b("ngModelChange",function(s){m(e);let l=d();return v(l.filterStatus,s)||(l.filterStatus=s),g(s)}),u("selectionChange",function(){m(e);let s=d();return g(s.applyFilters())}),n(10,"mat-option",7),i(11,"All"),t(),n(12,"mat-option",8),i(13,"Pending"),t(),n(14,"mat-option",9),i(15,"Approved"),t(),n(16,"mat-option",10),i(17,"Rejected"),t()()()(),f(18,_e,2,0,"div",11),n(19,"mat-accordion",12),f(20,he,30,17,"mat-expansion-panel",13),t(),n(21,"mat-paginator",14),u("page",function(s){m(e);let l=d();return g(l.onPageChange(s))}),t()()}if(r&2){let e=d();a(5),O("ngModel",e.filterText),a(4),O("ngModel",e.filterStatus),a(9),c("ngIf",e.paginatedRequests().length===0),a(2),c("ngForOf",e.paginatedRequests()),a(),c("length",e.filteredRequests.length)("pageSize",9)("pageSizeOptions",R(7,ue))}}function Oe(r,o){r&1&&(n(0,"div",33),h(1,"mat-spinner"),n(2,"p"),i(3,"Loading requests..."),t()())}var me=class r{adminService=C(ce);snackbar=C(K);requests=M([]);loading=M(!1);filterText="";filterStatus="";filteredRequests=[];pageIndex=0;pageSize=9;ngOnInit(){this.loadRequests()}loadRequests(){this.loading.set(!0),this.adminService.getDoctorUpdateRequests().subscribe({next:o=>{this.requests.set(o),this.filteredRequests=o,this.loading.set(!1)},error:()=>{this.snackbar.open("Failed to load requests","Close",{duration:3e3}),this.loading.set(!1)}})}applyFilters(){let o=this.filterText.toLowerCase();this.filteredRequests=this.requests().filter(e=>{let p=e.doctor?.user?.fullName?.toLowerCase()||"",s=e.doctor?.user?.email?.toLowerCase()||"",l=p.includes(o)||s.includes(o),ge=this.filterStatus?e.status===this.filterStatus:!0;return l&&ge}),this.pageIndex=0}paginatedRequests(){let o=this.pageIndex*this.pageSize,e=o+this.pageSize;return this.filteredRequests.slice(o,e)}onPageChange(o){this.pageIndex=o.pageIndex,this.pageSize=o.pageSize}acceptRequest(o){this.adminService.acceptRequest(o).subscribe({next:()=>{this.snackbar.open("Request accepted successfully","Close",{duration:3e3}),this.loadRequests()},error:()=>this.snackbar.open("Failed to accept request","Close",{duration:3e3})})}rejectRequest(o){let e=prompt("Enter rejection note:");e&&this.adminService.rejectRequest(o,e).subscribe({next:()=>{this.snackbar.open("Request rejected successfully","Close",{duration:3e3}),this.loadRequests()},error:()=>this.snackbar.open("Failed to reject request","Close",{duration:3e3})})}deleteRequest(o){confirm("Are you sure you want to delete this request?")&&this.adminService.deleteRequest(o).subscribe({next:()=>{this.snackbar.open("Request deleted successfully","Close",{duration:3e3}),this.loadRequests()},error:()=>this.snackbar.open("Failed to delete request","Close",{duration:3e3})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=S({type:r,selectors:[["app-doctor-requests"]],decls:3,vars:2,consts:[["loadingTpl",""],["class","requests-container",4,"ngIf","ngIfElse"],[1,"requests-container"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Name or Email",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],["value","PENDING"],["value","APPROVED"],["value","REJECTED"],["class","empty-state",4,"ngIf"],["multi",""],["class","request-panel","hideToggle","",4,"ngFor","ngForOf"],[3,"page","length","pageSize","pageSizeOptions"],[1,"empty-state"],["hideToggle","",1,"request-panel"],[1,"header-row"],[1,"info"],[1,"doctor-name"],[1,"email"],[1,"meta"],[3,"color"],[1,"date"],[1,"payload"],["class","section",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","warn",3,"click","disabled"],["mat-stroked-button","","color","accent",3,"click"],[1,"section"],[1,"avatar-preview",3,"src"],[1,"pricing-table"],[4,"ngFor","ngForOf"],[1,"loading"]],template:function(e,p){if(e&1&&f(0,Pe,22,8,"div",1)(1,Oe,4,0,"ng-template",null,0,D),e&2){let s=E(2);c("ngIf",!p.loading())("ngIfElse",s)}},dependencies:[T,I,k,N,F,V,z,Q,W,L,B,j,G,te,ee,ne,oe,ie,pe,de,le,se,ae,re,H,J,$,U,Z,Y,X,A],styles:[".title[_ngcontent-%COMP%]{margin:0 0 .8rem}.toolbar[_ngcontent-%COMP%]{display:flex;gap:.6rem;align-items:center;margin-bottom:.8rem}.w[_ngcontent-%COMP%]{width:180px;min-width:160px}.grid[_ngcontent-%COMP%]{display:grid;gap:1rem;grid-template-columns:repeat(auto-fill,minmax(320px,1fr))}.req-card[_ngcontent-%COMP%]{border-radius:16px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,#ffffff08,#ffffff05),#1018288c;-webkit-backdrop-filter:blur(10px) saturate(120%);backdrop-filter:blur(10px) saturate(120%);padding:.9rem}.head[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;margin-bottom:.4rem}.head[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{font-weight:800;letter-spacing:.3px;padding:.2rem .5rem;border-radius:8px;background:#ffffff0d;border:1px solid rgba(255,255,255,.07)}.status[_ngcontent-%COMP%]{margin-left:auto}.who[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.6rem}.name[_ngcontent-%COMP%]{font-weight:800;font-size:1.05rem}.meta[_ngcontent-%COMP%]{display:grid;gap:.35rem;margin:.5rem 0 .2rem}.row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.45rem}.row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;opacity:.85}.link[_ngcontent-%COMP%]{color:var(--text);text-decoration:none}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.muted[_ngcontent-%COMP%]{opacity:.85}.changes[_ngcontent-%COMP%]{display:grid;gap:.5rem;margin:.5rem 0 .25rem}.chg[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;padding:.55rem .6rem;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#ffffff08}.field[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.chg-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;opacity:.85}.fromto[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.45rem;white-space:nowrap}.from[_ngcontent-%COMP%]{opacity:.85}.arrow[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;opacity:.9}.to[_ngcontent-%COMP%]{font-weight:700}.attach[_ngcontent-%COMP%]{display:inline-flex;gap:.3rem;align-items:center;margin-left:.4rem;text-decoration:none}.attach[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.note[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.45rem;padding:.4rem .5rem;border-left:3px solid rgba(255,255,255,.15);background:#00000026;border-radius:8px;margin:.4rem 0 0}.note[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;opacity:.85}.actions[_ngcontent-%COMP%]{display:flex;gap:.6rem;align-items:center;justify-content:flex-start;margin-top:.6rem}.grow[_ngcontent-%COMP%]{flex:1 1 auto}.pager[_ngcontent-%COMP%]{margin-top:.8rem}@media (max-width: 720px){.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.requests-container[_ngcontent-%COMP%]{padding:1.5rem}.requests-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.requests-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;font-size:1.1rem;padding:2rem;color:#777}.requests-container[_ngcontent-%COMP%]   .request-panel[_ngcontent-%COMP%]{background:#00000014;border-radius:12px;box-shadow:0 1px 4px #00000014;margin-bottom:1rem;transition:box-shadow .2s ease}.requests-container[_ngcontent-%COMP%]   .request-panel[_ngcontent-%COMP%]:hover{box-shadow:0 3px 8px #0000001f}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#00000014!important;padding:.8rem 1rem;border-bottom:1px solid #eee}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .doctor-name[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:600}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:.85rem;color:#888}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.requests-container[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.8rem;color:#777}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]{padding:1rem;background:#00000014;border-radius:0 0 12px 12px}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-top:1rem}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .avatar-preview[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:8px;border:1px solid #ccc;object-fit:cover}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .pricing-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:.5rem}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .pricing-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .pricing-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.5rem .7rem}.requests-container[_ngcontent-%COMP%]   .payload[_ngcontent-%COMP%]   .pricing-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5}.requests-container[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;justify-content:flex-end;border-top:1px solid #eee}.requests-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:2rem}.requests-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}"]})};export{me as AdminDoctorRequestsComponent};
