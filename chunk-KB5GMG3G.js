import{a as A}from"./chunk-NZMSRNPH.js";import"./chunk-3RK6DDJD.js";import{a as D,h as N,i as T,m as L,n as q}from"./chunk-FXUZVO2G.js";import{a as k,b as z}from"./chunk-CQ63BDYT.js";import"./chunk-NZBL2PSU.js";import{Z as F}from"./chunk-YNMGB45N.js";import"./chunk-F426BNRH.js";import{h as R}from"./chunk-RXNQWMFM.js";import{Db as O,Fb as d,Gc as w,Hc as S,Ia as C,Ma as r,Qb as x,Rb as f,Rc as I,Sc as E,Tb as c,Ub as s,Vb as M,Wb as b,Xa as P,ab as m,ea as v,ec as y,gc as h,lc as g,rb as l,sb as i,ta as p,tb as o,ub as _}from"./chunk-BE7DJT6W.js";function U(n,t){if(n&1&&(i(0,"mat-icon"),c(1,"star"),o()),n&2){let e=t.$implicit,a=d(2);f("active",e<=a.roundedAvg())}}function B(n,t){if(n&1&&(i(0,"div",16)(1,"span",17),c(2),o(),i(3,"div",18),_(4,"span"),o(),i(5,"span",19),c(6),o()()),n&2){let e=t.$implicit,a=d(2);r(2),M("",e,"\u2605"),r(2),x("width",a.distPercent(e),"%"),r(2),M("",a.distPercent(e),"%")}}function Y(n,t){if(n&1&&(i(0,"section",8)(1,"div",9)(2,"div",10),c(3),y(4,"number"),o(),i(5,"div",11),m(6,U,2,2,"mat-icon",12),o(),i(7,"div",13),c(8),o()(),i(9,"div",14),m(10,B,7,4,"div",15),o()()),n&2){let e=t.ngIf,a=d();r(3),s(h(4,5,a.avg(),"1.1-1")),r(3),l("ngForOf",a.stars),r(2),b("",e," review",e>1?"s":""),r(2),l("ngForOf",a.stars.slice().reverse())}}function G(n,t){n&1&&(i(0,"div",20)(1,"mat-icon"),c(2,"inbox"),o(),i(3,"div"),c(4,"No reviews found"),o()())}function H(n,t){if(n&1&&(i(0,"mat-icon"),c(1,"star"),o()),n&2){let e=t.$implicit,a=d().$implicit;f("active",e<=a.rating)}}function J(n,t){if(n&1&&(i(0,"div",2),c(1),o()),n&2){let e=d().$implicit;r(),s(e.title)}}function K(n,t){if(n&1&&(i(0,"article",23)(1,"div",24)(2,"div",25),_(3,"img",26),i(4,"div",27)(5,"div",28),c(6),o(),i(7,"div",29)(8,"span",11),m(9,H,2,2,"mat-icon",12),o(),i(10,"span",30),c(11,"\u2022"),o(),i(12,"span",31),c(13),o()()()()(),i(14,"div",32),m(15,J,2,1,"div",33),i(16,"p",34),c(17),o()()()),n&2){let e=t.$implicit,a=d(2);r(3),l("src",e.avatarUrl,C),r(3),s(e.reviewerName),r(3),l("ngForOf",a.stars),r(4),s(a.dateLabel(e.createdAt)),r(2),l("ngIf",e.title),r(2),s(e.comment)}}function Q(n,t){if(n&1&&(i(0,"div",21),m(1,K,18,6,"article",22),o()),n&2){let e=d();r(),l("ngForOf",e.filtered())}}var $=class n{service=v(A);all=p([]);loading=p(!0);error=p(null);query=p("");stars=[1,2,3,4,5];ngOnInit(){this.loadReviews()}loadReviews(){this.loading.set(!0),this.error.set(null),this.service.getReviews().subscribe(t=>{console.log("Fetched reviews:",t),this.all.set(t.reviews),this.loading.set(!1)},t=>{this.error.set("Failed to load reviews"),this.loading.set(!1)})}filtered=g(()=>{let t=this.query().trim().toLowerCase();return this.all().filter(e=>!t||e.reviewerName.toLowerCase().includes(t)||e.comment.toLowerCase().includes(t)||e.title?.toLowerCase().includes(t)).sort((e,a)=>new Date(a.createdAt).getTime()-new Date(e.createdAt).getTime())});count=g(()=>this.all().length);avg=g(()=>{let t=this.count();if(!t)return 0;let e=this.all().reduce((a,u)=>a+u.rating,0);return Math.round(e/t*10)/10});roundedAvg=g(()=>Math.round(this.avg()));dist=g(()=>{let t={1:0,2:0,3:0,4:0,5:0};for(let e of this.all())t[e.rating]++;return t});distPercent(t){let e=this.count();return e?Math.round((this.dist()[t]||0)/e*100):0}dateLabel(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit"})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=P({type:n,selectors:[["app-reviews"]],decls:14,vars:4,consts:[[1,"reviews-wrap"],[1,"toolbar"],[1,"title"],["appearance","outline",1,"search"],["matInput","","placeholder","Patient name, comment\u2026",3,"input","value"],["class","card summary",4,"ngIf"],["class","empty",4,"ngIf"],["class","list",4,"ngIf"],[1,"card","summary"],[1,"left"],[1,"avg"],[1,"stars"],[3,"active",4,"ngFor","ngForOf"],[1,"muted"],[1,"dist"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"label"],[1,"bar"],[1,"pct"],[1,"empty"],[1,"list"],["class","card item",4,"ngFor","ngForOf"],[1,"card","item"],[1,"head"],[1,"doc"],["alt","Doctor avatar",1,"avatar",3,"src"],[1,"who"],[1,"name"],[1,"meta"],[1,"dot"],[1,"date"],[1,"body"],["class","title",4,"ngIf"],[1,"comment"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon"),c(4,"reviews"),o(),i(5,"h2"),c(6,"My Reviews"),o()(),i(7,"mat-form-field",3)(8,"mat-label"),c(9,"Search reviews"),o(),i(10,"input",4),O("input",function(j){return a.query.set(j.target.value)}),o()()(),m(11,Y,11,8,"section",5)(12,G,5,0,"div",6)(13,Q,2,1,"div",7),o()),e&2&&(r(10),l("value",a.query()),r(),l("ngIf",a.count()),r(),l("ngIf",!a.filtered().length),r(),l("ngIf",a.filtered().length))},dependencies:[E,w,S,R,z,k,F,T,N,D,q,L,I],styles:['@charset "UTF-8";.reviews-wrap[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;display:flex;flex-direction:column;gap:1.25rem;transition:all .3s ease}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem}.toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem}.toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:26px;color:#2a9df4}.toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:800;font-size:1.5rem;letter-spacing:.3px;background:linear-gradient(90deg,#2a76b7,#1db7a0);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.toolbar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{min-width:260px;flex:1;max-width:400px}.summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;gap:1rem;padding:1rem;background:#ffffff08;border:1px solid rgba(255,255,255,.06);border-radius:18px;box-shadow:0 12px 28px #00000059;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:grid;place-items:center;gap:.35rem;text-align:center;border-right:1px solid rgba(255,255,255,.06)}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .avg[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;color:#fff}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex;gap:.15rem}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.3;font-size:20px;color:#ffb400}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{opacity:1}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .muted[_ngcontent-%COMP%]{font-size:.9rem;opacity:.75}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:.55rem;padding:.5rem .75rem}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:40px 1fr 50px;align-items:center;gap:.5rem;font-size:.9rem}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.85}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{height:8px;border-radius:999px;background:#ffffff14;overflow:hidden}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:100%;background:linear-gradient(90deg,#2a76b7,#1db7a0)}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .pct[_ngcontent-%COMP%]{text-align:right;opacity:.8}.empty[_ngcontent-%COMP%]{display:grid;place-items:center;gap:.5rem;padding:2rem;text-align:center;border:1px dashed rgba(255,255,255,.1);border-radius:16px;opacity:.8;color:#aab7c4}.empty[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;opacity:.6}.list[_ngcontent-%COMP%]{display:grid;gap:1rem}.item[_ngcontent-%COMP%]{background:#ffffff08;border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:1rem;box-shadow:0 8px 24px #00000059;transition:transform .2s ease,box-shadow .2s ease}.item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 30px #00000073}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.65rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,.1)}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:.3rem;font-size:.9rem;opacity:.8}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{opacity:.6}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex;gap:.1rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.3;color:#ffb400}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{opacity:1}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{margin-top:.6rem}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1.05rem;margin-bottom:.3rem;color:#fff}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{opacity:.95;line-height:1.45;font-size:.95rem}@media (max-width: 768px){.summary[_ngcontent-%COMP%]{grid-template-columns:1fr;text-align:center}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{border-right:none;border-bottom:1px solid rgba(255,255,255,.06);padding-bottom:.75rem}.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.toolbar[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.mdc-text-field--outlined[_ngcontent-%COMP%]   .mdc-text-field__input[_ngcontent-%COMP%]{padding-top:12px!important;padding-bottom:12px!important;line-height:1!important}.mat-mdc-form-field[_ngcontent-%COMP%]{--mat-form-field-container-vertical-padding: 15px}']})};export{$ as Reviews};
