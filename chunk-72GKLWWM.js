import"./chunk-3RK6DDJD.js";import{a as T,h as L,i as j,m as A,n as $}from"./chunk-WLFKFW6S.js";import{a as z}from"./chunk-2T3LKAHM.js";import{a as k,b as q}from"./chunk-4P6M4J7Y.js";import{h as F}from"./chunk-LC7HZC43.js";import"./chunk-YXOZBBHG.js";import"./chunk-CCREW7CN.js";import"./chunk-WSZ2ZTRK.js";import{Z as N}from"./chunk-WXJKX6WL.js";import{$b as m,Ac as w,Cc as I,E as O,Hc as s,Nb as d,Ob as i,Pb as o,Qb as _,Xa as v,Zb as b,_a as r,fa as P,fd as S,gd as E,kb as x,kc as y,lc as M,nc as c,oc as l,p as u,pb as g,pc as f,qc as h,qd as R,rd as D,wa as p}from"./chunk-PCHMKQLW.js";function G(n,e){if(n&1&&(i(0,"mat-icon"),c(1,"star"),o()),n&2){let t=e.$implicit,a=m(2);M("active",t<=a.roundedAvg())}}function H(n,e){if(n&1&&(i(0,"div",16)(1,"span",17),c(2),o(),i(3,"div",18),_(4,"span"),o(),i(5,"span",19),c(6),o()()),n&2){let t=e.$implicit,a=m(2);r(2),f("",t,"\u2605"),r(2),y("width",a.distPercent(t),"%"),r(2),f("",a.distPercent(t),"%")}}function J(n,e){if(n&1&&(i(0,"section",8)(1,"div",9)(2,"div",10),c(3),w(4,"number"),o(),i(5,"div",11),g(6,G,2,2,"mat-icon",12),o(),i(7,"div",13),c(8),o()(),i(9,"div",14),g(10,H,7,4,"div",15),o()()),n&2){let t=e.ngIf,a=m();r(3),l(I(4,5,a.avg(),"1.1-1")),r(3),d("ngForOf",a.stars),r(2),h("",t," review",t>1?"s":""),r(2),d("ngForOf",a.stars.slice().reverse())}}function K(n,e){n&1&&(i(0,"div",20)(1,"mat-icon"),c(2,"inbox"),o(),i(3,"div"),c(4,"No reviews found"),o()())}function Q(n,e){if(n&1&&(i(0,"mat-icon"),c(1,"star"),o()),n&2){let t=e.$implicit,a=m().$implicit;M("active",t<=a.rating)}}function V(n,e){if(n&1&&(i(0,"div",2),c(1),o()),n&2){let t=m().$implicit;r(),l(t.title)}}function W(n,e){if(n&1&&(i(0,"article",23)(1,"div",24),_(2,"img",25),i(3,"div",26)(4,"div",27),c(5),o(),i(6,"div",28)(7,"span",11),g(8,Q,2,2,"mat-icon",12),o(),i(9,"span",29),c(10,"\u2022"),o(),i(11,"span",30),c(12),o()()()(),i(13,"div",31),g(14,V,2,1,"div",32),i(15,"p",33),c(16),o()()()),n&2){let t=e.$implicit,a=m(2);r(2),d("src",t.avatarUrl,v),r(3),l(t.revieweeName),r(3),d("ngForOf",a.stars),r(4),l(a.dateLabel(t.createdAt)),r(2),d("ngIf",t.title),r(2),l(t.comment)}}function X(n,e){if(n&1&&(i(0,"div",21),g(1,W,17,6,"article",22),o()),n&2){let t=m();r(),d("ngForOf",t.filtered())}}var B=class n{service=P(z);all=p([]);loading=p(!0);error=p(null);query=p("");stars=[1,2,3,4,5];filtered=s(()=>{let e=this.query().trim().toLowerCase();return this.all().filter(t=>!e||t.revieweeName.toLowerCase().includes(e)||t.comment.toLowerCase().includes(e)||t.title?.toLowerCase().includes(e)).sort((t,a)=>new Date(a.createdAt).getTime()-new Date(t.createdAt).getTime())});count=s(()=>this.all().length);avg=s(()=>{let e=this.count();if(!e)return 0;let t=this.all().reduce((a,C)=>a+C.rating,0);return Math.round(t/e*10)/10});roundedAvg=s(()=>Math.round(this.avg()));dist=s(()=>{let e={1:0,2:0,3:0,4:0,5:0};for(let t of this.all())e[t.rating]++;return e});distPercent(e){let t=this.count();return t?Math.round((this.dist()[e]||0)/t*100):0}dateLabel(e){return new Date(e).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit"})}ngOnInit(){this.loadReviews()}loadReviews(){this.loading.set(!0),this.error.set(null),this.service.getMyReviews().pipe(O(e=>(this.error.set("Failed to load reviews"),console.error(e),u([])))).subscribe(e=>{this.all.set(e),this.loading.set(!1)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=x({type:n,selectors:[["app-reviews"]],decls:14,vars:4,consts:[[1,"reviews-wrap"],[1,"toolbar"],[1,"title"],["appearance","outline",1,"search"],["matInput","","placeholder","Doctor name, comment\u2026",3,"input","value"],["class","card summary",4,"ngIf"],["class","empty",4,"ngIf"],["class","list",4,"ngIf"],[1,"card","summary"],[1,"left"],[1,"avg"],[1,"stars"],[3,"active",4,"ngFor","ngForOf"],[1,"muted"],[1,"dist"],["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"label"],[1,"bar"],[1,"pct"],[1,"empty"],[1,"list"],["class","card item",4,"ngFor","ngForOf"],[1,"card","item"],[1,"head"],["alt","",1,"avatar",3,"src"],[1,"who"],[1,"name"],[1,"meta"],[1,"dot"],[1,"date"],[1,"body"],["class","title",4,"ngIf"],[1,"comment"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon"),c(4,"reviews"),o(),i(5,"h2"),c(6,"My Reviews"),o()(),i(7,"mat-form-field",3)(8,"mat-label"),c(9,"Search reviews"),o(),i(10,"input",4),b("input",function(U){return a.query.set(U.target.value)}),o()()(),g(11,J,11,8,"section",5)(12,K,5,0,"div",6)(13,X,2,1,"div",7),o()),t&2&&(r(10),d("value",a.query()),r(),d("ngIf",a.count()),r(),d("ngIf",!a.filtered().length),r(),d("ngIf",a.filtered().length))},dependencies:[D,S,E,F,q,k,N,j,L,T,$,A,R],styles:[".rev-wrap[_ngcontent-%COMP%]{padding:1rem}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem}.toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem}.toolbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:800;letter-spacing:.2px}.toolbar[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .doctor[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{min-width:220px}.toolbar[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{border-radius:999px;overflow:hidden}.summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;gap:1rem;background:#ffffff05;border:1px solid rgba(255,255,255,.06);border-radius:16px;box-shadow:0 10px 25px #00000040}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:grid;place-items:center;gap:.25rem;padding:.75rem}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .avg[_ngcontent-%COMP%]{font-size:42px;line-height:1;font-weight:800;letter-spacing:.2px}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex;gap:.1rem}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.35}.summary[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{opacity:1}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]{display:grid;gap:.45rem;padding:.8rem .8rem .9rem}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:grid;grid-template-columns:44px 1fr 44px;align-items:center;gap:.6rem}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{opacity:.8}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{height:10px;border-radius:999px;background:#ffffff0f;overflow:hidden}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:100%;background:linear-gradient(90deg,#2a76b7,#1db7a0)}.summary[_ngcontent-%COMP%]   .dist[_ngcontent-%COMP%]   .pct[_ngcontent-%COMP%]{text-align:right;opacity:.9}.pending[_ngcontent-%COMP%]{margin-top:1rem}.pending[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .6rem}.pending[_ngcontent-%COMP%]   .strip[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(260px,1fr);gap:.75rem;overflow-x:auto;padding-bottom:.25rem}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]{display:grid;align-content:start;gap:.75rem;background:#ffffff05;border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:.85rem;box-shadow:0 10px 25px #00000040}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.65rem}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:44px;height:44px;border-radius:50%;object-fit:cover}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:.9rem}.pending[_ngcontent-%COMP%]   .pcard[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:flex-start}.list[_ngcontent-%COMP%]{display:grid;gap:.9rem;margin-top:1rem}.item[_ngcontent-%COMP%]{background:#ffffff05;border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:.9rem;box-shadow:0 10px 25px #00000040}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;object-fit:cover}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:700}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .doc[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:.9rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:flex;gap:.1rem}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.35}.item[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   mat-icon.active[_ngcontent-%COMP%]{opacity:1}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{margin-top:.5rem}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.2rem}.item[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{opacity:.95}.item[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]{margin-top:.6rem;display:flex;align-items:center;justify-content:space-between;gap:.75rem}.item[_ngcontent-%COMP%]   .tail[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.4rem}.empty[_ngcontent-%COMP%]{display:grid;place-items:center;gap:.4rem;padding:1.5rem;border:1px dashed rgba(255,255,255,.1);border-radius:16px;opacity:.8}.mdc-text-field--outlined[_ngcontent-%COMP%]   .mdc-text-field__input[_ngcontent-%COMP%]{padding-top:12px!important;padding-bottom:12px!important;line-height:1!important}.mat-mdc-form-field[_ngcontent-%COMP%]{--mat-form-field-container-vertical-padding: 15px}"]})};export{B as ReviewsComponent};
