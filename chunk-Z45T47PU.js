import{a as u}from"./chunk-OGDSJRSL.js";import{a as Q,b as Z,c as tt,d as et,e as nt,f as ot}from"./chunk-FKATGAZG.js";import{b as ct}from"./chunk-EOAQWSMD.js";import{a as rt,c as at}from"./chunk-BC57U3EU.js";import{b as it}from"./chunk-OQ674PF3.js";import"./chunk-GGQ7LRWG.js";import{c as G,d as J,f as v,g as K}from"./chunk-NQP6NLRO.js";import"./chunk-BR5LHSVS.js";import"./chunk-OY7Y436C.js";import"./chunk-YCVTR2B7.js";import"./chunk-TR43TC6U.js";import"./chunk-YN6JIHUF.js";import{a as Y,b as q}from"./chunk-W6QHVSTW.js";import"./chunk-W6FI7VKQ.js";import{T as W,Y as H,Z as X}from"./chunk-YSTQL2PO.js";import{a as R,c as F,d as j,e as A,f as U,h as V}from"./chunk-QJG5D5WU.js";import{$ as b,$b as p,Ac as B,Bc as N,Da as y,Ga as a,Gc as T,Jb as D,Ka as w,Lb as g,Mc as z,Nb as r,Ob as C,P as O,Pb as $,Ra as S,Wa as s,_b as d,ea as h,fa as _,lb as l,mb as e,nb as o,o as k,ob as m,sb as E,tb as I,vb as L,x as P,xb as M,zb as f}from"./chunk-HKUWCROW.js";import"./chunk-JKOY2XUY.js";function st(c,n){if(c&1&&(e(0,"span",20),r(1),o()),c&2){let t=f(2);a(),$(" ",t.unreadCount," ")}}function mt(c,n){if(c&1&&(e(0,"a",16),d(1,"async"),e(2,"div",17)(3,"mat-icon"),r(4),o(),s(5,st,2,1,"span",18),o(),e(6,"span",19),r(7),o()()),c&2){let t=n.$implicit,i=f();g("disabled",p(1,8,i.locked$)&&!t.lockExempt)("lock-exempt",t.lockExempt),l("routerLink",t.path),a(4),C(t.icon),a(),l("ngIf",t.icon==="notifications"&&i.unreadCount>0),a(2),C(t.label)}}function ft(c,n){c&1&&(e(0,"div",23)(1,"div",24)(2,"mat-icon"),r(3,"lock"),o(),e(4,"h3"),r(5,"Finish your profile to unlock Medtik"),o(),e(6,"p"),r(7," Your account is active but you need to complete your profile and set a new password before accessing other tools. "),o(),e(8,"button",25),r(9,"Complete profile"),o()()())}function gt(c,n){if(c&1&&(E(0),s(1,ft,10,0,"div",21),d(2,"async"),m(3,"div",22),d(4,"async"),I()),c&2){let t=n.ngIf,i=f();a(),l("ngIf",p(2,3,i.locked$)&&!t),a(2),g("page-locked",p(4,5,i.locked$)&&!t)}}var lt=class c{constructor(n){this.docService=n;this.onProfileRoute$=this.router.events.pipe(P(t=>t instanceof R),k(t=>t.urlAfterRedirects.startsWith("/doctor/profile")),O(this.router.url.startsWith("/doctor/profile")))}logoUrl="https://ik.imagekit.io/a2wpi1kd9/imgToUrl/image-to-url_HEow9eLbR";profileService=b(u);router=b(j);unreadCount=0;locked$=this.profileService.locked$;loading$=this.profileService.loading$;profile$=this.profileService.profile$;onProfileRoute$;navLinks=[{path:"dashboard",label:"Dashboard",icon:"dashboard"},{path:"schedule",label:"Schedule",icon:"calendar_month"},{path:"patients",label:"Patients",icon:"group"},{path:"appointments",label:"Appointments",icon:"event"},{path:"inbox",label:"Inbox",icon:"forum"},{path:"profile",label:"Profile",icon:"badge",lockExempt:!0},{path:"settings",label:"Settings",icon:"settings"},{path:"notifications",label:"Notifications",icon:"notifications",badge:"5"},{path:"help",label:"Help",icon:"help"}];ngOnInit(){this.locked$.subscribe(n=>{n===!0&&!this.router.url.includes("/doctor/profile")&&(console.warn("\u{1F512} Account locked \u2192 redirecting to /doctor/profile"),this.router.navigate(["/doctor/profile"]))}),this.loadNotifications()}loadNotifications(){this.docService.getNotifications().subscribe({next:n=>{console.log("Notifications on logout:",n),this.unreadCount=n.filter(t=>!t.read).length,console.log("Unread notifications count on logout:",this.unreadCount)},error:n=>{console.error("Error fetching notifications on logout:",n)}})}trackByIndex(n){return n}onNavClick(n,t){t&&(n.preventDefault(),n.stopImmediatePropagation())}logout(){localStorage.removeItem("medtik_token"),this.router.navigate(["/auth/login"])}static \u0275fac=function(t){return new(t||c)(w(u))};static \u0275cmp=S({type:c,selectors:[["app-doctor-layout"]],decls:38,vars:23,consts:[["snav",""],[1,"shell"],["mode","side","opened","",1,"side"],[1,"brand"],["alt","Medtik",1,"brand-logo",3,"src"],["mat-list-item","","routerLinkActive","active","class","side-link",3,"routerLink","disabled","lock-exempt",4,"ngFor","ngForOf","ngForTrackBy"],[1,"content"],[1,"topbar"],["mat-icon-button","",1,"hide-desktop",3,"click"],[1,"grow"],["mat-stroked-button","","color","primary","routerLink","/doctor/schedule",3,"disabled"],["mat-icon-button","","routerLink","/doctor/inbox",3,"disabled"],["mat-button","","routerLink","/doctor/dashboard",1,"home",3,"disabled"],["mat-button","",1,"user",3,"disabled"],["mat-icon-button","","color","warn",3,"click"],[4,"ngIf"],["mat-list-item","","routerLinkActive","active",1,"side-link",3,"routerLink"],[1,"notification-icon"],["class","notification-count",4,"ngIf"],[1,"link-label"],[1,"notification-count"],["class","lock-overlay",4,"ngIf"],[1,"page"],[1,"lock-overlay"],[1,"overlay-card"],["mat-flat-button","","color","primary","routerLink","/doctor/profile"]],template:function(t,i){if(t&1){let x=L();e(0,"mat-sidenav-container",1)(1,"mat-sidenav",2,0),d(3,"async"),e(4,"div",3),m(5,"img",4),e(6,"span"),r(7,"Medtik \xB7 Doctor"),o()(),s(8,mt,8,10,"a",5),o(),e(9,"mat-sidenav-content",6)(10,"mat-toolbar",7)(11,"button",8),M("click",function(){h(x);let pt=D(2);return _(pt.toggle())}),e(12,"mat-icon"),r(13,"menu"),o()(),m(14,"span",9),e(15,"button",10),d(16,"async"),e(17,"mat-icon"),r(18,"add"),o(),r(19," Slots "),o(),e(20,"button",11),d(21,"async"),e(22,"mat-icon"),r(23,"forum"),o()(),e(24,"button",12),d(25,"async"),e(26,"mat-icon"),r(27,"home"),o()(),e(28,"button",13),d(29,"async"),e(30,"mat-icon"),r(31,"account_circle"),o()(),e(32,"button",14),M("click",function(){return h(x),_(i.logout())}),e(33,"mat-icon"),r(34,"logout"),o()()(),s(35,gt,5,7,"ng-container",15),d(36,"async"),m(37,"router-outlet"),o()()}t&2&&(a(),g("side-locked",p(3,11,i.locked$)),l("@slideIn",void 0),a(4),l("src",i.logoUrl,y),a(3),l("ngForOf",i.navLinks)("ngForTrackBy",i.trackByIndex),a(7),l("disabled",p(16,13,i.locked$)),a(5),l("disabled",p(21,15,i.locked$)),a(4),l("disabled",p(25,17,i.locked$)),a(4),l("disabled",p(29,19,i.locked$)),a(7),l("ngIf",p(36,21,i.onProfileRoute$)))},dependencies:[z,B,N,V,F,A,U,et,Z,tt,Q,ot,nt,at,rt,q,Y,X,H,W,ct,it,T],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;min-height:100dvh;background:transparent}.shell[_ngcontent-%COMP%]{height:100dvh;background:transparent}.side[_ngcontent-%COMP%]{width:300px;background:#ffffff05;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-right:1px solid rgba(255,255,255,.06)}.brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem .9rem}.brand-logo[_ngcontent-%COMP%]{width:56px;height:56px;object-fit:contain;display:block;filter:drop-shadow(0 6px 16px rgba(42,118,183,.45))}.brand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:800;font-size:1.05rem;letter-spacing:.3px}.mat-mdc-list-item.active[_ngcontent-%COMP%]{background:#ffffff0a;border-left:3px solid rgba(42,118,183,.7)}.mat-mdc-list-item.active[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .mat-mdc-list-item.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text)}.content[_ngcontent-%COMP%]   .topbar[_ngcontent-%COMP%]{background:transparent;color:var(--text);border-bottom:1px solid rgba(255,255,255,.06)}.hide-desktop[_ngcontent-%COMP%]{display:none}.grow[_ngcontent-%COMP%]{flex:1 1 auto}.page[_ngcontent-%COMP%]{padding:1.25rem}@media (max-width: 960px){.hide-desktop[_ngcontent-%COMP%]{display:inline-flex}.side[_ngcontent-%COMP%]{width:260px}.brand-logo[_ngcontent-%COMP%]{width:44px;height:44px}}.side.side-locked[_ngcontent-%COMP%]{pointer-events:none;opacity:.45}.mat-mdc-list-item.disabled[_ngcontent-%COMP%]{opacity:.45;pointer-events:none}.lock-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:grid;place-items:center;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:linear-gradient(180deg,#0a0f19b8,#0a0f19d9);z-index:5;padding:1.5rem}.overlay-card[_ngcontent-%COMP%]{max-width:420px;text-align:center;padding:2rem;border-radius:20px;background:linear-gradient(180deg,#ffffff0d,#ffffff05);border:1px solid rgba(255,255,255,.16);box-shadow:0 28px 70px #00000073;display:grid;gap:.85rem}.overlay-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:44px;height:44px;width:44px;margin:0 auto;color:#8fc7ff}.overlay-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.35rem;font-weight:700}.overlay-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#d0d6e2;line-height:1.4}.page-locked[_ngcontent-%COMP%]{filter:blur(2px) grayscale(.35);pointer-events:none}.content[_ngcontent-%COMP%]{position:relative}.mat-toolbar[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{opacity:.5}.mat-mdc-list-item.lock-exempt[_ngcontent-%COMP%]{opacity:1!important;pointer-events:auto!important}a.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}a.mat-list-item.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5;cursor:not-allowed}[_nghost-%COMP%]     .mdc-button.home, [_nghost-%COMP%]     .mdc-button.user{min-width:0!important;width:40px!important;height:40px!important;padding:0!important;border-radius:50%!important;display:flex!important;align-items:center!important;justify-content:center!important;overflow:visible!important;color:var(--text);opacity:.9;transition:background .2s ease}[_nghost-%COMP%]     .mdc-button.home:hover, [_nghost-%COMP%]     .mdc-button.user:hover{background:#ffffff14}[_nghost-%COMP%]     .mdc-button.home[disabled], [_nghost-%COMP%]     .mdc-button.user[disabled]{opacity:.5;cursor:not-allowed}[_nghost-%COMP%]     .mdc-button.home mat-icon, [_nghost-%COMP%]     .mdc-button.user mat-icon{font-size:22px!important;margin:0!important;line-height:1!important}[_nghost-%COMP%]     .mdc-button__ripple, [_nghost-%COMP%]     .mat-mdc-button-touch-target, [_nghost-%COMP%]     .mat-mdc-button-persistent-ripple{width:100%!important;height:100%!important;border-radius:50%!important;overflow:visible!important;inset:0!important;min-height:unset!important}[_nghost-%COMP%]     .mat-mdc-button-base{overflow:visible!important}a[mat-list-item][_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important;align-items:center!important;gap:.75rem!important;padding:.85rem 1.2rem!important;line-height:1.2!important;color:#ffffffd9!important;text-decoration:none;transition:all .25s ease;border-left:3px solid transparent}a[mat-list-item][_ngcontent-%COMP%]:hover{background:#ffffff14;color:#fff}a[mat-list-item].active[_ngcontent-%COMP%]{background:#2a76b726;border-left-color:#2a76b7e6;color:#fff}a[mat-list-item][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;color:#ffffffbf;transition:color .25s ease}a[mat-list-item].active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], a[mat-list-item][_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#2a96ffe6}.icon-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center}.content[_ngcontent-%COMP%]   .topbar[_ngcontent-%COMP%]{background:transparent;color:var(--text);border-bottom:1px solid rgba(255,255,255,.06);display:flex;align-items:center;padding:0 1rem}button.mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffffffd9}button.mat-stroked-button[_ngcontent-%COMP%]{border-color:#2a76b7cc}.page[_ngcontent-%COMP%]{padding:1.5rem}@media (max-width: 960px){.side[_ngcontent-%COMP%]{width:250px}.brand-logo[_ngcontent-%COMP%]{width:44px;height:44px}}[_nghost-%COMP%]     .mat-drawer-container, [_nghost-%COMP%]     .mat-drawer-content, [_nghost-%COMP%]     .mat-sidenav-content, [_nghost-%COMP%]     .content, [_nghost-%COMP%]     .page, [_nghost-%COMP%]     .topbar{background:transparent!important}[_nghost-%COMP%]     .side-link .mdc-list-item__content, [_nghost-%COMP%]     .side-link .mdc-list-item__primary-text{display:flex!important;flex-direction:row!important;align-items:center!important;gap:12px!important;width:100%!important}.side-link[_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:flex-start!important;padding:.85rem 1.2rem!important;color:#ffffffd9!important;text-decoration:none!important;border-left:3px solid transparent;transition:all .25s ease}.side-link[_ngcontent-%COMP%]:hover{background:#ffffff14;color:#fff}.side-link.active[_ngcontent-%COMP%]{background:#2a76b726;border-left-color:#2a76b7e6;color:#fff}.side-link.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.notification-icon[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;width:28px}.notification-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;color:#ffffffbf;transition:color .25s ease}.side-link.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .side-link[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#2a96ffe6}.notification-count[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background-color:#ff3b3b;color:#fff;font-size:11px;font-weight:700;padding:2px 5px;border-radius:10px;line-height:1}.link-label[_ngcontent-%COMP%]{flex:1;font-size:.95rem;white-space:nowrap}'],data:{animation:[G("slideIn",[K(":enter",[v({transform:"translateX(-10px)",opacity:0}),J("300ms ease-out",v({transform:"none",opacity:1}))])])]}})};export{lt as DoctorLayoutComponent};
