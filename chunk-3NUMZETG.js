import{a}from"./chunk-LVHP3QQG.js";import{a as s,b as r}from"./chunk-CUGN3AIA.js";import{$ as c,W as n,g as i}from"./chunk-HKUWCROW.js";var f=class e{socket=null;authService=c(r);notificationsSubject=new i([]);notifications$=this.notificationsSubject.asObservable();constructor(){let t=localStorage.getItem("admin_notifications");t&&this.notificationsSubject.next(JSON.parse(t)),this.notifications$.subscribe(o=>{localStorage.setItem("admin_notifications",JSON.stringify(o))})}connect(){if(this.socket)return this.socket;let t=this.authService.getToken();return t?(this.socket=a(s.socketUrl,{auth:{token:t,role:"ADMIN"},transports:["websocket"],reconnection:!0}),this.socket.on("connect",()=>console.log("\u2705 Admin socket connected",this.socket?.id)),this.socket.on("disconnect",o=>console.warn("\u26A1 Admin socket disconnected",o)),this.socket):null}getSocket(){return this.socket}static \u0275fac=function(o){return new(o||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};export{f as a};
